$("#stateSelect").tap(function(){var d=$("#deptTitle").html();var b=$("#deptTitle").attr("data-dept");var c=$("#stateTitle").html();var e=$("#stateTitle").attr("data-state");var a='<div id="findDoc_section">'+'<header class="bg-green">'+'<h1 class="title">签约专家</h1>'+"</header>"+'<nav id="contractDoctors_nav" class="header-secondary bg-white">'+'<div class="grid w100 color-black font-s16 color-black6">'+'<div id="stateSelect" data-target="closePopup" class="col-1 w50 br-gray bb-gray grid middle grayImg">'+'<span id="stateTitle" data-state="'+e+'">'+c+'</span><img src="../../themes/md2/images/gray.png">'+"</div>"+'<div id="deptSelect" data-target="closePopup" class="col-1 w50 bb-gray grid middle grayImg">'+'<span id="deptTitle" data-dept="'+b+'">'+d+'</span><img src="../../themes/md2/images/gray.png">'+"</div>"+"</div>"+"</nav>"+'<article id="contractDoctors_article" class="active" style="position:static;">'+$stateHtml+"</article>"+"</div>";J.popup({html:a,pos:"top",showCloseBtn:false});$(".state").click(function(g){g.preventDefault();$deptId=$("#deptTitle").attr("data-dept");$deptName=$("#deptTitle").html();$stateId=$(this).attr("data-state");$stateName=$(this).html();$condition["disease_sub_category"]="";$condition["state"]=$stateId;$condition["page"]=1;J.closePopup();var f=$requestDoc+"?"+setUrlCondition()+"&getcount=1";J.showMask();$.ajax({url:f,success:function(h){readyDoc(h);$("#stateTitle").html($stateName);$("#stateTitle").attr("data-state",$stateId);$("#deptTitle").html("科室");$("#deptTitle").attr("data-dept","");setLocationUrl();$("#contractDoctors_article").scrollTop(0)}})})});$("#deptSelect").tap(function(){deptSelect()});function deptSelect(){var d=$("#deptTitle").html();var b=$("#deptTitle").attr("data-dept");var c=$("#stateTitle").html();var e=$("#stateTitle").attr("data-state");var a='<div id="findDoc_section">'+'<header class="bg-green">'+'<h1 class="title">签约专家</h1>'+"</header>"+'<nav id="contractDoctors_nav" class="header-secondary bg-white">'+'<div class="grid w100 color-black font-s16 color-black6">'+'<div id="stateSelect" data-target="closePopup" class="col-1 w50 br-gray bb-gray grid middle grayImg">'+'<span id="stateTitle" data-state="'+e+'">'+c+'</span><img src="../../themes/md2/images/gray.png">'+"</div>"+'<div id="deptSelect" data-target="closePopup" class="col-1 w50 bb-gray grid middle grayImg">'+'<span id="deptTitle" data-dept="'+b+'">'+d+'</span><img src="../../themes/md2/images/gray.png">'+"</div>"+"</div>"+"</nav>"+'<article id="contractDoctors_article" class="active" style="position:static;">'+$deptHtml+"</article>"+"</div>";J.popup({html:a,pos:"top",showCloseBtn:false});$(".aDept").click(function(g){g.preventDefault();var f=$(this).attr("data-dept");$(".aDept").each(function(){if(f==$(this).attr("data-dept")){$(this).addClass("bg-white")}else{$(this).removeClass("bg-white")}});$(".bDept").each(function(){if(f==$(this).attr("data-dept")){$(this).removeClass("hide")}else{$(this).addClass("hide")}})});$(".cDept").click(function(g){g.preventDefault();$deptId=$(this).attr("data-dept");$deptName=$(this).html();$condition["disease_sub_category"]=$deptId;$condition["state"]=e;$condition["page"]=1;J.closePopup();var f=$requestDoc+"?"+setUrlCondition()+"&getcount=1";J.showMask();$.ajax({url:f,success:function(h){readyDoc(h);$deptName=$deptName.length>4?$deptName.substr(0,3)+"...":$deptName;$("#deptTitle").html($deptName);$("#deptTitle").attr("data-dept",$deptId);setLocationUrl();$("#contractDoctors_article").scrollTop(0)}})})}function readyDoc(d){var e=d.results;var a='<div class="pt50"></div>';if(e){if(e.length>0){for(var f=0;f<e.length;f++){var c=f==0?"":"bt-gray2";var g=(e[f].desc==""||e[f].desc==null)?"暂无信息":e[f].desc;g=g.length>40?g.substr(0,40)+"...":g;a+='<div><div class="bb10-gray"></div>'+'<a href="'+$requestDoctorView+"/"+e[f].id+'/addBackBtn/1" data-target="link">'+'<div class="grid pl15 pr15 pt10 pb10 '+c+'">'+'<div class="col-1 w25">'+'<div class="w60p h60p br50 overflow-h"><img class="imgDoc" src="'+e[f].imageUrl+'"></div>';var j="";if(e[f].aTitle!="无"){j=e[f].aTitle}a+="</div>"+'<div class="ml10 col-1 w75">'+'<div class="color-black2 font-s16">'+e[f].name+'<span class="ml5 color-black6 font-s14">'+j+"</span></div>";if(e[f].hpDeptName==""||e[f].hpDeptName==null){if(e[f].mTitle==""||e[f].mTitle==null){a+=""}else{a+='<div class="color-black6">'+e[f].mTitle+"</div>"}}else{if(e[f].mTitle==""||e[f].mTitle==null){a+='<div class="color-black6">'+e[f].hpDeptName+"</div>"}else{a+='<div class="color-black6">'+e[f].hpDeptName+'<span class="ml5">'+e[f].mTitle+"</span></div>"}}if(e[f].hpName!=""&&e[f].hpName!=null){a+='<div class="font-s12 pt5"><span class="hosIcon">'+e[f].hpName+"</span></div>"}a+="</div>"+"</div>"+"</a>";a+='<div class="pl15 pr15 pt5 pb10 font-s12 color-black bb-gray2">'+'擅长:<span class="color-gray">'+g+"</span></div>"+"</div>"}}}else{a+='<div class="grid pl15 pr15 pt10 pb10 bb-gray2">暂无信息</div>'}if(d.dataNum!=null){var h=Math.ceil(d.dataNum/12);if(h>1){a+='<div class="bb10-gray"></div><div class="grid pl15 pr15 pt10 bb-gray3 bt-gray2"><div class="grid w100">'+'<div class="col-1 w40">'+'<button id="previousPage" type="button" class="button btn-yellow">上一页</button>'+'</div><div class="col-1 w20">'+'<select id="selectPage" onchange="changePage()">';var b=$condition["page"];for(var f=1;f<=h;f++){if(b==f){a+='<option id="quickPage" value="'+f+'" selected = "selected">'+f+"</option>"}else{a+='<option id="quickPage" value="'+f+'">'+f+"</option>"}}a+="</select>"+"</div>"+'<div class="col-1 w40">'+'<button id="nextPage" type="button" class="button btn-yellow">下一页</button>'+"</div>"+"</div></div>"}}$("#docPage").html(a);initPage(h);J.hideMask()}function initPage(a){$("#previousPage").tap(function(){if($condition["page"]>1){$condition["page"]=parseInt($condition["page"])-1;J.showMask();$.ajax({url:$requestDoc+"?"+setUrlCondition()+"&getcount=1",success:function(b){readyDoc(b);setLocationUrl();$("#contractDoctors_article").scrollTop(0)}})}else{J.showToast("已是第一页","","1000")}});$("#nextPage").tap(function(){if($condition["page"]<a){$condition["page"]=parseInt($condition["page"])+1;J.showMask();$.ajax({url:$requestDoc+"?"+setUrlCondition()+"&getcount=1",success:function(b){readyDoc(b);setLocationUrl();$("#contractDoctors_article").scrollTop(0)}})}else{J.showToast("已是最后一页","","1000")}})}function changePage(){$condition["page"]=$("#selectPage").val();J.showMask();$.ajax({url:$requestDoc+"?"+setUrlCondition()+"&getcount=1",success:function(a){readyDoc(a);setLocationUrl();$("#contractDoctors_article").scrollTop(0)}})}function setUrlCondition(){var a="";for($key in $condition){if($condition[$key]&&$condition[$key]!==""){a+="&"+$key+"="+$condition[$key]}}return a.substring(1)}function setLocationUrl(){var b={};var d="";var a="";for($key in $condition){if($condition[$key]&&$condition[$key]!==""){a+="&"+$key+"="+$condition[$key]}}a=a.substring(1);a="?"+a;var c=$requestViewContractDoctors+a;history.pushState(b,d,c)};